'use babel';
import TooltipPortal from './TooltipPortal';
import React from 'preact-compat';
import * as Analytics from '../stepsize/Analytics';
class TooltipContainer extends React.Component {
    constructor(props) {
        super(props);
        this.state = {
            show: false,
        };
    }
    showTooltip() {
        Analytics.track('Tooltip shown');
        this.setState({ show: true });
    }
    hideTooltip() {
        Analytics.track('Tooltip hidden');
        this.setState({ show: false });
    }
    mouseEnterHandler() {
        clearTimeout(this.timeout);
        this.timeout = setTimeout(() => {
            this.showTooltip();
        }, 500);
    }
    mouseLeaveHandler() {
        if (this.timeout) {
            clearTimeout(this.timeout);
        }
        this.timeout = setTimeout(() => {
            this.hideTooltip();
        }, 500);
    }
    ;
    renderTooltip() {
        if (this.state.show) {
            return (React.createElement(TooltipPortal, { parent: this.containerElement, mouseEnter: this.mouseEnterHandler.bind(this), mouseLeave: this.mouseLeaveHandler.bind(this) }, this.props.tooltipContent()));
        }
        return null;
    }
    render() {
        return (React.createElement("div", { style: {
                width: '100%',
            }, onMouseEnter: this.mouseEnterHandler.bind(this), onMouseLeave: this.mouseLeaveHandler.bind(this), ref: (el) => this.containerElement = el },
            this.renderTooltip(),
            this.props.children));
    }
}
export default TooltipContainer;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVG9vbHRpcENvbnRhaW5lci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL2xpYi9jb21wb25lbnRzL1Rvb2x0aXBDb250YWluZXIudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFdBQVcsQ0FBQztBQUVaLE9BQU8sYUFBYSxNQUFNLGlCQUFpQixDQUFDO0FBQzVDLE9BQU8sS0FBdUMsTUFBTSxlQUFlLENBQUM7QUFFcEUsT0FBTyxLQUFLLFNBQVMsTUFBTSx1QkFBdUIsQ0FBQztBQVVuRCxzQkFBdUIsU0FBUSxLQUFLLENBQUMsU0FBeUQ7SUFNNUYsWUFBWSxLQUE2QjtRQUN2QyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDYixJQUFJLENBQUMsS0FBSyxHQUFHO1lBQ1gsSUFBSSxFQUFFLEtBQUs7U0FDWixDQUFDO0lBQ0osQ0FBQztJQUVELFdBQVc7UUFDVCxTQUFTLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDO1FBQ2pDLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztJQUNoQyxDQUFDO0lBRUQsV0FBVztRQUNULFNBQVMsQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUNsQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7SUFDakMsQ0FBQztJQUVELGlCQUFpQjtRQUNmLFlBQVksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDM0IsSUFBSSxDQUFDLE9BQU8sR0FBRyxVQUFVLENBQUM7WUFDeEIsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFBO1FBQ3BCLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUNWLENBQUM7SUFFRCxpQkFBaUI7UUFDZixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztZQUNqQixZQUFZLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQzdCLENBQUM7UUFDRCxJQUFJLENBQUMsT0FBTyxHQUFHLFVBQVUsQ0FBQztZQUN4QixJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDckIsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ1YsQ0FBQztJQUFBLENBQUM7SUFFRixhQUFhO1FBQ1gsRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQSxDQUFDO1lBQ2xCLE1BQU0sQ0FBQyxDQUNMLG9CQUFDLGFBQWEsSUFDWixNQUFNLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixFQUM3QixVQUFVLEVBQUUsSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFDN0MsVUFBVSxFQUFFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQzVDLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxFQUFFLENBQ2QsQ0FDakIsQ0FBQztRQUNKLENBQUM7UUFDRCxNQUFNLENBQUMsSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUVELE1BQU07UUFDSixNQUFNLENBQUMsQ0FDTCw2QkFDRSxLQUFLLEVBQUU7Z0JBQ0wsS0FBSyxFQUFFLE1BQU07YUFDZCxFQUNELFlBQVksRUFBRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUMvQyxZQUFZLEVBQUUsSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFDL0MsR0FBRyxFQUFFLENBQUMsRUFBRSxLQUFLLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxFQUFFO1lBRXRDLElBQUksQ0FBQyxhQUFhLEVBQUU7WUFDcEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQ2hCLENBQ1AsQ0FBQztJQUNKLENBQUM7Q0FFRjtBQUVELGVBQWUsZ0JBQWdCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGJhYmVsJztcblxuaW1wb3J0IFRvb2x0aXBQb3J0YWwgZnJvbSAnLi9Ub29sdGlwUG9ydGFsJztcbmltcG9ydCBSZWFjdCwgeyBFdmVudEhhbmRsZXIsIFN5bnRoZXRpY0V2ZW50IH0gZnJvbSAncHJlYWN0LWNvbXBhdCc7XG5pbXBvcnQgVGltZXIgPSBOb2RlSlMuVGltZXI7XG5pbXBvcnQgKiBhcyBBbmFseXRpY3MgZnJvbSAnLi4vc3RlcHNpemUvQW5hbHl0aWNzJztcblxuaW50ZXJmYWNlIElUb29sdGlwQ29udGFpbmVyUHJvcHMge1xuICB0b29sdGlwQ29udGVudDogSlNYLkVsZW1lbnQ7XG59XG5cbmludGVyZmFjZSBJVG9vbHRpcENvbnRhaW5lclN0YXRlIHtcbiAgc2hvdzogYm9vbGVhbjtcbn1cblxuY2xhc3MgVG9vbHRpcENvbnRhaW5lciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxJVG9vbHRpcENvbnRhaW5lclByb3BzLCBJVG9vbHRpcENvbnRhaW5lclN0YXRlPiB7XG5cbiAgc3RhdGU6IElUb29sdGlwQ29udGFpbmVyU3RhdGU7XG4gIHRpbWVvdXQ6IFRpbWVyO1xuICBjb250YWluZXJFbGVtZW50OiBIVE1MRGl2RWxlbWVudDtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogSVRvb2x0aXBDb250YWluZXJQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgc2hvdzogZmFsc2UsXG4gICAgfTtcbiAgfVxuXG4gIHNob3dUb29sdGlwKCkge1xuICAgIEFuYWx5dGljcy50cmFjaygnVG9vbHRpcCBzaG93bicpO1xuICAgIHRoaXMuc2V0U3RhdGUoeyBzaG93OiB0cnVlIH0pO1xuICB9XG5cbiAgaGlkZVRvb2x0aXAoKSB7XG4gICAgQW5hbHl0aWNzLnRyYWNrKCdUb29sdGlwIGhpZGRlbicpO1xuICAgIHRoaXMuc2V0U3RhdGUoeyBzaG93OiBmYWxzZSB9KTtcbiAgfVxuXG4gIG1vdXNlRW50ZXJIYW5kbGVyKCkge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpO1xuICAgIHRoaXMudGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5zaG93VG9vbHRpcCgpXG4gICAgfSwgNTAwKTtcbiAgfVxuXG4gIG1vdXNlTGVhdmVIYW5kbGVyKCkge1xuICAgIGlmICh0aGlzLnRpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpO1xuICAgIH1cbiAgICB0aGlzLnRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuaGlkZVRvb2x0aXAoKTtcbiAgICB9LCA1MDApO1xuICB9O1xuXG4gIHJlbmRlclRvb2x0aXAoKSB7XG4gICAgaWYodGhpcy5zdGF0ZS5zaG93KXtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxUb29sdGlwUG9ydGFsXG4gICAgICAgICAgcGFyZW50PXt0aGlzLmNvbnRhaW5lckVsZW1lbnR9XG4gICAgICAgICAgbW91c2VFbnRlcj17dGhpcy5tb3VzZUVudGVySGFuZGxlci5iaW5kKHRoaXMpfVxuICAgICAgICAgIG1vdXNlTGVhdmU9e3RoaXMubW91c2VMZWF2ZUhhbmRsZXIuYmluZCh0aGlzKX0+XG4gICAgICAgICAge3RoaXMucHJvcHMudG9vbHRpcENvbnRlbnQoKX1cbiAgICAgICAgPC9Ub29sdGlwUG9ydGFsPlxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXZcbiAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICB9fVxuICAgICAgICBvbk1vdXNlRW50ZXI9e3RoaXMubW91c2VFbnRlckhhbmRsZXIuYmluZCh0aGlzKX1cbiAgICAgICAgb25Nb3VzZUxlYXZlPXt0aGlzLm1vdXNlTGVhdmVIYW5kbGVyLmJpbmQodGhpcyl9XG4gICAgICAgIHJlZj17KGVsKSA9PiB0aGlzLmNvbnRhaW5lckVsZW1lbnQgPSBlbH1cbiAgICAgID5cbiAgICAgICAge3RoaXMucmVuZGVyVG9vbHRpcCgpfVxuICAgICAgICB7dGhpcy5wcm9wcy5jaGlsZHJlbn1cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBUb29sdGlwQ29udGFpbmVyO1xuIl19