'use babel';
import React from 'preact-compat';
import ReactDOM from 'preact-compat';
class TooltipPortal extends React.Component {
    componentDidMount() {
        this.portal = document.createElement('div');
        document.body.appendChild(this.portal);
        this.renderTooltipContent(this.props);
    }
    componentWillUnmount() {
        ReactDOM.unmountComponentAtNode(this.portal);
    }
    getTooltipStyle() {
        let rect = this.props.parent.getBoundingClientRect();
        return {
            webkitFontSmoothing: 'subpixel-antialiased',
            position: 'absolute',
            zIndex: 100,
        };
    }
    positionTooltip() {
        const parentRect = this.props.parent.getBoundingClientRect();
        const tooltipRect = this.tooltipElement.getBoundingClientRect();
        const tooltipWidth = tooltipRect.right - tooltipRect.left;
        const tooltipHeight = tooltipRect.bottom - tooltipRect.top;
        let leftPos = parentRect.right - tooltipWidth;
        if (leftPos < 0)
            leftPos += (Math.abs(leftPos) + 5);
        this.tooltipElement.style['left'] = `${leftPos}px`;
        let topPos = parentRect.top - tooltipHeight - 5;
        if (topPos < 0)
            topPos = parentRect.bottom + 5;
        this.tooltipElement.style['top'] = `${topPos}px`;
    }
    renderTooltipContent(props) {
        this.tooltipElement = ReactDOM.render(React.createElement("div", { style: this.getTooltipStyle(), onMouseEnter: this.props.mouseEnter, onMouseLeave: this.props.mouseLeave }, props.children), this.portal);
        this.positionTooltip();
    }
    render() {
        return null;
    }
}
export default TooltipPortal;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVG9vbHRpcFBvcnRhbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL2xpYi9jb21wb25lbnRzL1Rvb2x0aXBQb3J0YWwudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFdBQVcsQ0FBQztBQUVaLE9BQU8sS0FBSyxNQUFNLGVBQWUsQ0FBQztBQUNsQyxPQUFPLFFBQVEsTUFBTSxlQUFlLENBQUM7QUFRckMsbUJBQW9CLFNBQVEsS0FBSyxDQUFDLFNBQW1DO0lBS25FLGlCQUFpQjtRQUNmLElBQUksQ0FBQyxNQUFNLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM1QyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDdkMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN4QyxDQUFDO0lBRUQsb0JBQW9CO1FBQ2xCLFFBQVEsQ0FBQyxzQkFBc0IsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDL0MsQ0FBQztJQUVELGVBQWU7UUFDYixJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxxQkFBcUIsRUFBRSxDQUFDO1FBQ3JELE1BQU0sQ0FBQztZQUNMLG1CQUFtQixFQUFFLHNCQUFzQjtZQUMzQyxRQUFRLEVBQUUsVUFBVTtZQUNwQixNQUFNLEVBQUUsR0FBRztTQUNaLENBQUE7SUFDSCxDQUFDO0lBRUQsZUFBZTtRQUNiLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLHFCQUFxQixFQUFFLENBQUM7UUFDN0QsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxxQkFBcUIsRUFBRSxDQUFDO1FBQ2hFLE1BQU0sWUFBWSxHQUFHLFdBQVcsQ0FBQyxLQUFLLEdBQUcsV0FBVyxDQUFDLElBQUksQ0FBQztRQUMxRCxNQUFNLGFBQWEsR0FBRyxXQUFXLENBQUMsTUFBTSxHQUFHLFdBQVcsQ0FBQyxHQUFHLENBQUM7UUFFM0QsSUFBSSxPQUFPLEdBQUcsVUFBVSxDQUFDLEtBQUssR0FBRyxZQUFZLENBQUM7UUFDOUMsRUFBRSxDQUFDLENBQUUsT0FBTyxHQUFHLENBQUUsQ0FBQztZQUFDLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEQsSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBRyxPQUFPLElBQUksQ0FBQztRQUVuRCxJQUFJLE1BQU0sR0FBRyxVQUFVLENBQUMsR0FBRyxHQUFHLGFBQWEsR0FBRyxDQUFDLENBQUM7UUFDaEQsRUFBRSxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztZQUFDLE1BQU0sR0FBRyxVQUFVLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztRQUMvQyxJQUFJLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxHQUFHLE1BQU0sSUFBSSxDQUFDO0lBQ25ELENBQUM7SUFFRCxvQkFBb0IsQ0FBQyxLQUFLO1FBQ3hCLElBQUksQ0FBQyxjQUFjLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyw2QkFDcEMsS0FBSyxFQUFFLElBQUksQ0FBQyxlQUFlLEVBQUUsRUFDN0IsWUFBWSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxFQUNuQyxZQUFZLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLElBRWxDLEtBQUssQ0FBQyxRQUFRLENBQ1QsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDdkIsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFBO0lBQ3hCLENBQUM7SUFFRCxNQUFNO1FBQ0osTUFBTSxDQUFDLElBQUksQ0FBQTtJQUNiLENBQUM7Q0FFRjtBQUVELGVBQWUsYUFBYSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBiYWJlbCc7XG5cbmltcG9ydCBSZWFjdCBmcm9tICdwcmVhY3QtY29tcGF0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdwcmVhY3QtY29tcGF0JztcblxuaW50ZXJmYWNlIElUb29sdGlwUG9ydGFsUHJvcHMge1xuICBwYXJlbnQ6IEhUTUxTcGFuRWxlbWVudDtcbiAgbW91c2VFbnRlcjogYW55O1xuICBtb3VzZUxlYXZlOiBhbnk7XG59XG5cbmNsYXNzIFRvb2x0aXBQb3J0YWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8SVRvb2x0aXBQb3J0YWxQcm9wcywgYW55PiB7XG5cbiAgcG9ydGFsOiBIVE1MRGl2RWxlbWVudDtcbiAgdG9vbHRpcEVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuXG4gIGNvbXBvbmVudERpZE1vdW50ICgpIHtcbiAgICB0aGlzLnBvcnRhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5wb3J0YWwpO1xuICAgIHRoaXMucmVuZGVyVG9vbHRpcENvbnRlbnQodGhpcy5wcm9wcyk7XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCAoKSB7XG4gICAgUmVhY3RET00udW5tb3VudENvbXBvbmVudEF0Tm9kZSh0aGlzLnBvcnRhbCk7XG4gIH1cblxuICBnZXRUb29sdGlwU3R5bGUoKSB7XG4gICAgbGV0IHJlY3QgPSB0aGlzLnByb3BzLnBhcmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICByZXR1cm4ge1xuICAgICAgd2Via2l0Rm9udFNtb290aGluZzogJ3N1YnBpeGVsLWFudGlhbGlhc2VkJyxcbiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgekluZGV4OiAxMDAsXG4gICAgfVxuICB9XG5cbiAgcG9zaXRpb25Ub29sdGlwKCl7XG4gICAgY29uc3QgcGFyZW50UmVjdCA9IHRoaXMucHJvcHMucGFyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGNvbnN0IHRvb2x0aXBSZWN0ID0gdGhpcy50b29sdGlwRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBjb25zdCB0b29sdGlwV2lkdGggPSB0b29sdGlwUmVjdC5yaWdodCAtIHRvb2x0aXBSZWN0LmxlZnQ7XG4gICAgY29uc3QgdG9vbHRpcEhlaWdodCA9IHRvb2x0aXBSZWN0LmJvdHRvbSAtIHRvb2x0aXBSZWN0LnRvcDtcblxuICAgIGxldCBsZWZ0UG9zID0gcGFyZW50UmVjdC5yaWdodCAtIHRvb2x0aXBXaWR0aDtcbiAgICBpZiAoIGxlZnRQb3MgPCAwICkgbGVmdFBvcyArPSAoTWF0aC5hYnMobGVmdFBvcykgKyA1KTtcbiAgICB0aGlzLnRvb2x0aXBFbGVtZW50LnN0eWxlWydsZWZ0J10gPSBgJHtsZWZ0UG9zfXB4YDtcblxuICAgIGxldCB0b3BQb3MgPSBwYXJlbnRSZWN0LnRvcCAtIHRvb2x0aXBIZWlnaHQgLSA1O1xuICAgIGlmICh0b3BQb3MgPCAwKSB0b3BQb3MgPSBwYXJlbnRSZWN0LmJvdHRvbSArIDU7XG4gICAgdGhpcy50b29sdGlwRWxlbWVudC5zdHlsZVsndG9wJ10gPSBgJHt0b3BQb3N9cHhgO1xuICB9XG5cbiAgcmVuZGVyVG9vbHRpcENvbnRlbnQocHJvcHMpIHtcbiAgICB0aGlzLnRvb2x0aXBFbGVtZW50ID0gUmVhY3RET00ucmVuZGVyKDxkaXZcbiAgICAgIHN0eWxlPXt0aGlzLmdldFRvb2x0aXBTdHlsZSgpfVxuICAgICAgb25Nb3VzZUVudGVyPXt0aGlzLnByb3BzLm1vdXNlRW50ZXJ9XG4gICAgICBvbk1vdXNlTGVhdmU9e3RoaXMucHJvcHMubW91c2VMZWF2ZX1cbiAgICA+XG4gICAgICB7cHJvcHMuY2hpbGRyZW59XG4gICAgICA8L2Rpdj4sIHRoaXMucG9ydGFsKTtcbiAgICB0aGlzLnBvc2l0aW9uVG9vbHRpcCgpXG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IFRvb2x0aXBQb3J0YWw7XG4iXX0=