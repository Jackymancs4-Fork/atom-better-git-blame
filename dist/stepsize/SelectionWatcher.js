'use babel';
import { CompositeDisposable } from 'atom';
import { debounce } from 'lodash';
class SelectionWatcher {
    constructor(editor) {
        this.subscriptions = new CompositeDisposable();
        this.editor = editor;
        this.subscriptions.add(this.editor.onDidChangeSelectionRange(() => {
            this.getSelections();
        }));
    }
    onSelection(selectionsCallback) {
        if (typeof selectionsCallback === 'function') {
            this.selectionHandler = debounce(selectionsCallback, 200);
        }
        else {
            throw new Error('Event listeners must supply a callback');
        }
    }
    getSelections() {
        let selectionRanges = this.editor.selections.map(selection => {
            return selection.getBufferRange();
        });
        this.selectionHandler(selectionRanges);
    }
}
export default SelectionWatcher;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2VsZWN0aW9uV2F0Y2hlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL2xpYi9zdGVwc2l6ZS9TZWxlY3Rpb25XYXRjaGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFdBQVcsQ0FBQztBQUdaLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMzQyxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sUUFBUSxDQUFDO0FBRWxDO0lBS0UsWUFBWSxNQUFlO1FBQ3pCLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxtQkFBbUIsRUFBRSxDQUFDO1FBQy9DLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUNwQixJQUFJLENBQUMsTUFBTSxDQUFDLHlCQUF5QixDQUFDO1lBQ3BDLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUN2QixDQUFDLENBQUMsQ0FDSCxDQUFDO0lBQ0osQ0FBQztJQUVELFdBQVcsQ0FBQyxrQkFBa0I7UUFDNUIsRUFBRSxDQUFDLENBQUMsT0FBTyxrQkFBa0IsS0FBSyxVQUFVLENBQUMsQ0FBQyxDQUFDO1lBQzdDLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxRQUFRLENBQUMsa0JBQWtCLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDNUQsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ04sTUFBTSxJQUFJLEtBQUssQ0FBQyx3Q0FBd0MsQ0FBQyxDQUFDO1FBQzVELENBQUM7SUFDSCxDQUFDO0lBRUQsYUFBYTtRQUNYLElBQUksZUFBZSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxTQUFTO1lBQ3hELE1BQU0sQ0FBQyxTQUFTLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDcEMsQ0FBQyxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsZUFBZSxDQUFDLENBQUM7SUFDekMsQ0FBQztDQUNGO0FBRUQsZUFBZSxnQkFBZ0IsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIid1c2UgYmFiZWwnO1xuXG5pbXBvcnQgSUVkaXRvciA9IEF0b21Db3JlLklFZGl0b3I7XG5pbXBvcnQgeyBDb21wb3NpdGVEaXNwb3NhYmxlIH0gZnJvbSAnYXRvbSc7XG5pbXBvcnQgeyBkZWJvdW5jZSB9IGZyb20gJ2xvZGFzaCc7XG5cbmNsYXNzIFNlbGVjdGlvbldhdGNoZXIge1xuICBlZGl0b3I6IElFZGl0b3I7XG4gIHNlbGVjdGlvbkhhbmRsZXI6IEZ1bmN0aW9uO1xuICBzdWJzY3JpcHRpb25zOiBBcnJheTxhbnk+O1xuXG4gIGNvbnN0cnVjdG9yKGVkaXRvcjogSUVkaXRvcikge1xuICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCk7XG4gICAgdGhpcy5lZGl0b3IgPSBlZGl0b3I7XG4gICAgdGhpcy5zdWJzY3JpcHRpb25zLmFkZChcbiAgICAgIHRoaXMuZWRpdG9yLm9uRGlkQ2hhbmdlU2VsZWN0aW9uUmFuZ2UoKCkgPT4ge1xuICAgICAgICB0aGlzLmdldFNlbGVjdGlvbnMoKTtcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIG9uU2VsZWN0aW9uKHNlbGVjdGlvbnNDYWxsYmFjaykge1xuICAgIGlmICh0eXBlb2Ygc2VsZWN0aW9uc0NhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzLnNlbGVjdGlvbkhhbmRsZXIgPSBkZWJvdW5jZShzZWxlY3Rpb25zQ2FsbGJhY2ssIDIwMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRXZlbnQgbGlzdGVuZXJzIG11c3Qgc3VwcGx5IGEgY2FsbGJhY2snKTtcbiAgICB9XG4gIH1cblxuICBnZXRTZWxlY3Rpb25zKCkge1xuICAgIGxldCBzZWxlY3Rpb25SYW5nZXMgPSB0aGlzLmVkaXRvci5zZWxlY3Rpb25zLm1hcChzZWxlY3Rpb24gPT4ge1xuICAgICAgcmV0dXJuIHNlbGVjdGlvbi5nZXRCdWZmZXJSYW5nZSgpO1xuICAgIH0pO1xuICAgIHRoaXMuc2VsZWN0aW9uSGFuZGxlcihzZWxlY3Rpb25SYW5nZXMpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNlbGVjdGlvbldhdGNoZXI7XG4iXX0=